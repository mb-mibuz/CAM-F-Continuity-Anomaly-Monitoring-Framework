% CAMF: Continuity Anomaly Monitoring Framework
% MEng Computing Final Year Project Report
% Imperial College London - 2025
% Author: Mihail Buzadji
% CID: 01909514
% Supervisor: Dr Josiah Wang
% Second Marker: Dr Nuri Cingillioglu

\documentclass[11pt,a4paper,oneside]{book}

% Essential packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern} % Modern Latin fonts
\usepackage[english]{babel}

% Page layout
\usepackage[top=2.5cm,bottom=2.5cm,left=3cm,right=2.5cm]{geometry}
\usepackage{setspace}
\onehalfspacing % Changed from double spacing for better readability

% Bibliography - using BibLaTeX with Vancouver style
\usepackage[
  backend=bibtex,
  style=vancouver,
  sorting=none,
  url=true,
  doi=false,
  eprint=false,
  maxbibnames=6,
  minbibnames=6,
  abbreviate=false,
  backref=false,
  defernumbers=true
]{biblatex}
\addbibresource{bibliography/references_vancouver.bib}

% Graphics and figures
\usepackage{graphicx}
\graphicspath{{figures/}}
\usepackage{subcaption}

% Tables
\usepackage{booktabs}
\usepackage{tabularx}

% Mathematics
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

% Code listings
\usepackage{listings}
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break, const, let, async, await, class, extends, import, export, from},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}
\lstset{
    basicstyle=\ttfamily\footnotesize,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single,
    xleftmargin=15pt,
    framexleftmargin=15pt,
    framexrightmargin=0pt,
    framexbottommargin=4pt,
    backgroundcolor=\color{lightgray!10}
}

% Hyperlinks and cross-references
\usepackage[colorlinks=true,linkcolor=black,citecolor=black,urlcolor=blue]{hyperref}

% Headers and footers
\usepackage{fancyhdr}
\setlength{\headheight}{14pt} % Fix headheight warning

% Define page styles
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{main}{
  \fancyhf{}
  \fancyhead[L]{\leftmark}
  \fancyhead[R]{\thepage}
  \renewcommand{\headrulewidth}{0.5pt}
  \renewcommand{\footrulewidth}{0pt}
}

% Page style for front matter chapters
\fancypagestyle{frontmatter}{
  \fancyhf{}
  \fancyhead[R]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

% Chapter formatting - clean academic style
\usepackage{titlesec}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries}
  {\chaptertitlename\ \thechapter}
  {20pt}
  {\Huge}
\titlespacing*{\chapter}{0pt}{0pt}{40pt}

% Format for unnumbered chapters in frontmatter
\newcommand{\frontmatterchapter}[1]{
  \cleardoublepage
  \phantomsection
  \addcontentsline{toc}{chapter}{#1}
  \chapter*{\hfill #1}
  \markboth{#1}{#1}
}

% Table of contents depth
\setcounter{tocdepth}{2}
\setcounter{secnumdepth}{3}

% Customize TOC appearance
\usepackage{tocloft}
\renewcommand{\cftchapfont}{\normalfont\bfseries}
\renewcommand{\cftchappagefont}{\normalfont\bfseries}
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftchapafterpnum}{\vskip5pt}
\setlength{\cftbeforechapskip}{10pt}

% Color package for any colored elements
\usepackage{xcolor}

% TikZ for positioning
\usepackage{tikz}

% Better enumeration
\usepackage{enumitem}

% Acronyms
\usepackage[withpage]{acronym}

% Appendix
\usepackage[toc,page]{appendix}

% Document metadata
\newcommand{\reporttitle}{CAM-F: Continuity Anomaly\texorpdfstring{\\}{ }Monitoring Framework}
\newcommand{\reportsubtitle}{Real-time Computer Vision-based System for Monitoring\\[0.3cm] On-set Film and Television Production}
\newcommand{\reportauthor}{Mihail Buzadji}
\newcommand{\reportcid}{01909514}
\newcommand{\reportdegree}{Master of Engineering}
\newcommand{\reportcourse}{Computing}
\newcommand{\reportsupervisor}{Dr Josiah Wang}
\newcommand{\reportsecondmarker}{Dr Nuri Cingillioglu}
\newcommand{\reportyear}{2025}
\newcommand{\reportdepartment}{Department of Computing}
\newcommand{\reportuniversity}{Imperial College London}

% PDF metadata
\hypersetup{
    pdftitle={\reporttitle},
    pdfauthor={\reportauthor},
    pdfsubject={MEng Computing Final Year Project},
    pdfkeywords={computer vision, film production, continuity monitoring, real-time systems}
}

\begin{document}

% Front matter
\frontmatter
\pagestyle{empty}

% Title page
\begin{titlepage}
    % Logo positioning (top left corner)
    \begin{tikzpicture}[remember picture, overlay]
        \node[anchor=north west, inner sep=0pt] at ([xshift=2.5cm, yshift=-2.5cm]current page.north west) {
            \includegraphics[width=0.5\textwidth]{figures/IC_New_Logo.pdf}
        };
    \end{tikzpicture}
    
    \begin{center}
        \vspace*{3.5cm}
        
        % Institution - formal academic style
        {\Large \textbf{\reportuniversity}}\\[0.1cm]
        {\large \reportdepartment}
        
        \vspace{2.5cm}
        
        % Main title
        \doublespacing 
        {\huge \textsc{\reporttitle}} \par
        \singlespacing
        
        \vspace{0.8cm}
        
        % Subtitle
        {\Large \textsc{\reportsubtitle}}
        
        \vspace{4.0cm}
        
        % Author and Markers aligned with title width
        \begin{minipage}[t]{0.35\textwidth}
            \raggedright
            \textbf{Author}\\[2mm]
            {\large \textsc{\reportauthor}}\\[1mm]
            {\normalsize CID: \reportcid}
        \end{minipage}
        \hfill
        \begin{minipage}[t]{0.35\textwidth}
            \raggedleft
            \textbf{Supervised by}\\[2mm]
            {\large \textsc{\reportsupervisor}}\\[1mm]
            \vskip 1cm
            \textbf{Second Marker}\\[2mm]
            {\large \textsc{\reportsecondmarker}}
        \end{minipage}
        
        \vspace{1.5cm}
        
        % Date
        {\large June \reportyear}
        
        \vfill
        
        % Bottom text - formal submission statement
        \vspace{1cm}
        A Final Report submitted in fulfilment of requirements for the degree of\\[0.15cm]
        \textbf{\reportdegree\ in \reportcourse}
        
        \vspace{2.5cm}
    \end{center}
\end{titlepage}

% Set page style for front matter
\pagestyle{frontmatter}
\pagenumbering{roman}

% Abstract
\input{frontmatter/Abstract}

% Acknowledgements
\input{frontmatter/Acknowledgement}

% Table of contents
\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{Contents}
\renewcommand{\contentsname}{\hfill Contents}
\tableofcontents

% List of acronyms removed

% List of figures
\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{List of Figures}
\renewcommand{\listfigurename}{\hfill List of Figures}
\listoffigures

% List of tables (optional - uncomment if needed)
% \cleardoublepage
% \phantomsection
% \addcontentsline{toc}{chapter}{List of Tables}
% \renewcommand{\listtablename}{\hfill List of Tables}
% \listoftables

% Main matter
\mainmatter
\pagestyle{main}
\pagenumbering{arabic}

% Chapters
\input{chapters/Introduction}
\input{chapters/Background}
\input{chapters/SystemDesign}
\input{chapters/Implementation}
\input{chapters/Evaluation}
\input{chapters/Conclusions}

% Back matter
\backmatter

% Bibliography
% Bibliography using BibLaTeX
\printbibliography[heading=bibintoc,title={References}]

% Declarations (NEW requirement from 2024-25)
% Must be positioned after References and before Appendices
\input{frontmatter/Declarations}

% Appendices
% \begin{appendices}
% \input{appendices/AppendixA_API}
% \input{appendices/AppendixB_UserGuide}
% \input{appendices/AppendixC_DetectorDev}
% \end{appendices}

\end{document}